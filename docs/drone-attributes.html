<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Drone Attributes · Udacidrone</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Drone Attributes · Udacidrone"/><meta property="og:type" content="website"/><meta property="og:url" content="https://udacity.github.io/udacidrone/index.html"/><meta property="og:description" content="The attributes contain the state information of the connected drone."/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/docusaurus.svg"/><h2 class="headerTitle">Udacidrone</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/docs/getting-started.html" target="_self">Docs</a></li><li><a target="_self"></a></li><li><a href="https://github.com/udacity/udacidrone" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Drone API</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/docs/welcome.html">Welcome</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started.html">Getting Started</a></li></ul></div><div class="navGroup navGroupActive"><h3>Drone API</h3><ul><li class="navListItem"><a class="navItem" href="/docs/drone-api.html">Overview</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/drone-attributes.html">Attributes</a></li></ul></div><div class="navGroup navGroupActive"><h3>Connection API</h3><ul><li class="navListItem"><a class="navItem" href="/docs/connection-api.html">Overview</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Drone Attributes</h1></header><article><div><span><p>The attributes contain the state information of the connected drone.</p>
<p>Note that all attributes that are arrays are formatted as numpy arrays.</p>
<p>Here is the list and definition of all the attributes in the drone class:</p>
<table>
<thead>
<tr><th>Attribute</th><th>Format</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>connected</code></td><td>boolean</td><td>the connected state of the API to the drone</td></tr>
<tr><td><code>armed</code></td><td>boolean</td><td>whether or not the drone is currently <code>armed</code>.  <code>Armed</code> means that the drone's motors are running and ready to take inputs.  Until the drone is <code>armed</code>, no motor inputs will create any effects (the motors are effectively turned off until the drone is <code>armed</code>)</td></tr>
<tr><td><code>guided</code></td><td>boolean</td><td>whether or not the drone is currently in a <code>guided</code> mode.  <code>Guided</code> mode means that the python script has control of the drone.  Until the drone is put into <code>guided</code> mode, no commands sent to it from a script will be executed.</td></tr>
<tr><td><code>attitude</code></td><td>[roll (degree), pitch (degree), yaw (degree)]</td><td>the current attitude of the drone</td></tr>
<tr><td><code>global_position</code></td><td>[longitude (degree), latitude (degree), altitude (meter)]</td><td>the current GPS position of the drone</td></tr>
<tr><td><code>global_home</code></td><td>[longitude (degree), latitude (degree), altitude (meter)]</td><td>the GPS position of the &quot;home&quot; location of the drone</td></tr>
<tr><td><code>local_position</code></td><td>[north (meter), east (meter), down (meter)]</td><td>the current local position of the drone.  Local position being defined as the NED position of the drone with respect to some (0,0,0) (the home position)</td></tr>
<tr><td><code>local_velocity</code></td><td>[vnorth (meter/second), veast (meter/second), vdown (meter/second)]</td><td>The current velocity vector of the drone in meters/second, represented in the local NED frame</td></tr>
<tr><td><code>acceleration_raw</code></td><td>[x (), y (), z ()]</td><td>a vector of the raw accelerations measurement of the drone in the body frame</td></tr>
<tr><td><code>gyro_raw</code></td><td>[x (), y (), z ()]</td><td>a vector of the raw gyroscope measurement of the drone in the body frame</td></tr>
<tr><td><code>barometer</code></td><td>alt (meter)</td><td>the current altitude of the drone (in meters) as measured solely by the barometer onboard a vehicle (or simulated)</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" name="listening-to-attribute-changes"></a><a href="#listening-to-attribute-changes" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Listening to Attribute Changes</h2>
<p>As new information about the drone is passed to <code>Drone</code> through the connection, various attributes will be updated.  Callbacks are functions that can be registered to be called when a specific set of attributes are updated.  There are two steps needed to be able to create and register a callback:</p>
<ol>
<li>Create the callback function:</li>
</ol>
<p>Each callback function you may want needs to be defined as a member function of your custom class that subclasses <code>Drone</code> that takes in only the <code>self</code> parameter.  For example, here is the definition of a callback method we may use for when the local position attribute is updated:</p>
<pre><code class="hljs css python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyDrone</span><span class="hljs-params">(Drone)</span>:</span>
    ...

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">local_position_callback</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-string">""" this is triggered when self.local_position contains new data """</span>
        <span class="hljs-keyword">pass</span>
</code></pre>
<ol start="2">
<li>Register the callback:</li>
</ol>
<p>In order to have your callback function called when the appropriate attributes are updated, each callback needs to be registered.  This registration takes place in your class's <code>__init__()</code> function as shown below:</p>
<pre><code class="hljs css python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyDrone</span><span class="hljs-params">(Drone)</span>:</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, connection)</span>:</span>
        ...

        <span class="hljs-comment"># register a callback on local position attribute changes</span>
        self.register_callback(MsgID.LOCAL_POSITION, self.local_position_callback)
</code></pre>
<p>Since callback functions are only called when certain drone attributes are changed, the first parameter to the callback registration indicates for which attribute changes you want the callback to occur.  Here is a list of the different sets of attribute changes you can listen to:</p>
<table>
<thead>
<tr><th>Registration flag</th><th>Conditions for triggering callback function</th></tr>
</thead>
<tbody>
<tr><td><code>MsgID.ANY</code></td><td>changes in any attribute</td></tr>
<tr><td><code>MsgID.STATE</code></td><td>changes in either <code>armed</code> or <code>guided</code></td></tr>
<tr><td><code>MsgID.GLOBAL_POSITION</code></td><td>changes in <code>global_position</code></td></tr>
<tr><td><code>MsgID.LOCAL_POSITION</code></td><td>changes in <code>local_position</code></td></tr>
<tr><td><code>MsgID.GLOBAL_HOME</code></td><td>changes in <code>global_home</code></td></tr>
<tr><td><code>MsgID.LOCAL_VELOCITY</code></td><td>changes in <code>local_velocity</code></td></tr>
<tr><td><code>MsgID.CONNECTION_CLOSED</code></td><td>connection to the drone has been terminated.  This means that attributes will no longer be updated and all drone facing commands will not be executed by the drone.</td></tr>
<tr><td><code>MsgID.RAW_GYROSCOPE</code></td><td>changes in <code>gyro_raw</code></td></tr>
<tr><td><code>MsgID.RAW_ACCELEROMETER</code></td><td>changes in <code>acceleration_raw</code></td></tr>
<tr><td><code>MsgID.BAROMETER</code></td><td>changes in <code>barometer</code></td></tr>
<tr><td><code>MsgID.DISTANCE_SENSOR</code></td><td>reserved</td></tr>
<tr><td><code>MsgID.ATTITUDE</code></td><td>changes in <code>attitude</code></td></tr>
</tbody>
</table>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="drone-api.html">← Drone API Overview</a><a class="docs-next button" href="connection-api.html">Connection API Overview →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2018 Udacity Inc.</section></footer></div></body></html>